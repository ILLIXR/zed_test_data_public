# zed_test_data

This repository holds test data collected by the ZED camera to be used
by the zed.data_injection plugin. To run ILLIXR with this data use the
test.yaml file to configure and build the needed plugins, and as the
input YAML file for the main binary. The following environment
variables should be set to properly configure everything:

| Name                   | Value                                                                                        |
| ---------------------- | -------------------------------------------------------------------------------------------- |
| CALCULATOR_CONFIG_FILE | <CMAKE_INSTALL_PREFIX>/share/mediapipe/graphs/hand_tracking/hand_tracking_desktop_live.pbtxt |
| HT_INPUT               | CAM                                                                                          |
| HT_INPUT_TYPE          | MULTI                                                                                        |
| ILLIXR_TEST_DATA       | <path_to_this_repo>/fps30_dur10                                                              |
| LD_LIBRARY_PATH        | <CMAKE_INSTALL_PREFIX>/lib                                                                   |

When running the data injector will publish the left and right camera
images and the associated pose information, the hand tracker plugin
will take these data and do its thing. A viewer will display the hand
tracking results. The inputs are only 10 seconds worth of data, but
will loop until main shuts down or is killed.

These data were generated by the `zed_capture` binary (now part of the
hand tracking branch). This binary can be built by adding the option `-DBUILD_ZED_CAPTURE=ON`. The naming convention for the directories is
'fps' + frames per second + 'dur' + duration of the data in seconds.

Note that at this time the depth information from the ZED camera is not
part of the injected data, both to keep the repo size smaller and due
to issues writing out float cv::Mat to disk. The depth for the points
in this data is currently determined by parallax. A live camera feed
will use the provided depth data.
